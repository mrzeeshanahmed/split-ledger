# redis.conf

# -----------------------------
# Persistence Configuration
# -----------------------------
# Enable Append Only File for total durability
appendonly yes
appendfsync everysec

# Save RDB snapshots:
# save <seconds> <changes>
# Save every 5 minutes if at least 1 key changed
save 300 1
# Save every 60 seconds if at least 1000 keys changed
save 60 1000

# -----------------------------
# Memory Limits
# -----------------------------
maxmemory 512mb
# Evict keys based on Least Recently Used algorithm
maxmemory-policy allkeys-lru

# -----------------------------
# Security
# -----------------------------
# Redis runs inside the Docker bridge network, safe to bind to all interfaces inside container
bind 0.0.0.0
protected-mode yes

# The password will actually be overridden by docker-compose environment vars passing into container,
# but we configure requirepass via config or command. In Docker we will depend on env var.
